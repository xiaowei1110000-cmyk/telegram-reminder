name: å®šæ—¶æé†’ç³»ç»Ÿ

# è§¦å‘æ¡ä»¶é…ç½® - å¿…é¡»è¿™æ ·å†™ï¼
on:
  schedule:
    - cron: '*/3 * * * *'   # æ¯3åˆ†é’Ÿè‡ªåŠ¨è¿è¡Œ
  workflow_dispatch:         # æ‰‹åŠ¨è§¦å‘

jobs:
  send-reminder:
    runs-on: ubuntu-latest
    steps:
      - name: ğŸ“¥ æ£€å‡ºä»£ç 
        uses: actions/checkout@v3
        with:
          fetch-depth: 1
          
      - name: ğŸ¤– å‘é€æé†’
        env:
          TOKEN: ${{ secrets.TELEGRAM_BOT_TOKEN }}
          CHAT_ID: ${{ secrets.TELEGRAM_CHAT_ID }}
        run: |
          echo "=================================="
          echo "âœ… å®šæ—¶æé†’ç³»ç»Ÿå¯åŠ¨æˆåŠŸ"
          echo "=================================="
          echo "â° å½“å‰æ—¶é—´: $(TZ='Asia/Shanghai' date '+%Y-%m-%d %H:%M:%S')"
          echo "ğŸ¯ è§¦å‘æ–¹å¼: ${{ github.event_name }}"
          echo ""
          
          # å‘é€æµ‹è¯•æ¶ˆæ¯ï¼ŒéªŒè¯Telegramæ˜¯å¦æ­£å¸¸
          echo "ğŸ“¤ å‘é€æµ‹è¯•æ¶ˆæ¯åˆ°Telegram..."
          
          curl -s -X POST \
            "https://api.telegram.org/bot${TOKEN}/sendMessage" \
            -d "chat_id=${CHAT_ID}" \
            -d "text=âœ… å®šæ—¶æé†’ç³»ç»Ÿå·²å¯åŠ¨ï¼%0Aâ° æ—¶é—´: $(TZ='Asia/Shanghai' date '+%Y-%m-%d %H:%M:%S')%0AğŸ¯ è§¦å‘æ–¹å¼: ${{ github.event_name }}"
          
          if [ $? -eq 0 ]; then
            echo "âœ… Telegramå‘é€æˆåŠŸ"
          else
            echo "âŒ Telegramå‘é€å¤±è´¥ï¼Œè¯·æ£€æŸ¥Secrets"
          fi
          
          echo ""
          echo "=================================="
          echo "âœ¨ æ‰§è¡Œå®Œæˆ"
          echo "=================================="
