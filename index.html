name: Send Telegram Reminder

on:
  schedule:
    - cron: '0 3 * * *'  # æ¯å¤©UTC 3:00è¿è¡Œï¼ˆå³åŒ—äº¬æ—¶é—´11:00ï¼‰
  workflow_dispatch:      # å…è®¸æ‰‹åŠ¨è§¦å‘

jobs:
  send-reminder:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v3
      
      - name: Check reminders
        id: check_reminders
        run: |
          # è¯»å–reminders.jsonæ–‡ä»¶
          if [ -f reminders.json ]; then
            # è§£æJSONï¼ŒæŸ¥æ‰¾ä»Šæ—¥åˆ°æœŸçš„é¡¹ç›®
            # è¿™é‡Œéœ€è¦æ·»åŠ å…·ä½“çš„æ£€æŸ¥é€»è¾‘
            echo "æœ‰ä»Šæ—¥åˆ°æœŸçš„æé†’é¡¹ç›®"
          else
            echo "æ²¡æœ‰æé†’æ•°æ®"
          fi
      
      - name: Send Telegram notification
        if: steps.check_reminders.outputs.has_reminders == 'true'
        uses: appleboy/telegram-action@master
        with:
          to: ${{ secrets.TELEGRAM_CHAT_ID }}
          token: ${{ secrets.TELEGRAM_BOT_TOKEN }}
          message: |
            ğŸ“… ä»Šæ—¥æé†’
            
            æœ‰ä»¥ä¸‹é¡¹ç›®éœ€è¦å¤„ç†ï¼š
            
            {{ è¿™é‡Œåˆ—å‡ºä»Šæ—¥åˆ°æœŸçš„é¡¹ç›® }}
            
            â° è¯·åŠæ—¶å¤„ç†ï¼
